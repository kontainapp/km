steps:
  - bash: make -C tests test-all-withk8s
    displayName: KM tests - run on Kubernetes
    timeoutInMinutes: 15

  - bash: make -C payloads/python test-all-withk8s
    displayName: Python.km tests - run on Kubernetes
    timeoutInMinutes: 15

  - bash: make -C payloads/node test-all-withk8s
    displayName: Node.km tests - run on Kubernetes
    timeoutInMinutes: 30

  - bash: make -C payloads/demo-dweb validate-runenv-withk8s
    displayName: demo dweb runenv validation - run on Kubernetes
    timeoutInMinutes: 2

  - bash: make -C payloads/python validate-runenv-withk8s
    displayName: Python.km runenv validation - run on Kubernetes
    timeoutInMinutes: 2

  - bash: make -C payloads/node validate-runenv-withk8s
    displayName: Node.km runenv validation - run on Kubernetes
    timeoutInMinutes: 2