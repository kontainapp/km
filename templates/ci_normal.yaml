# This file contains all the tests that are designed to run for every PR. Tests
# here should be short. Longer tests should be moved to ci_nighly pipeline.

steps:
  - bash: make -C tests test-withk8s TEST_JOBS=4
    displayName: KM tests - run on Kubernetes
    timeoutInMinutes: 15

  - bash: make -C payloads test-withk8s
    displayName: Python.km tests - run on Kubernetes
    timeoutInMinutes: 20

  - bash: make -C container-runtime test-remote TEST_REMOTE_TEST_ID=ci-$(Build.BuildId)
    displayName: crun tests - run on the vm
    timeoutInMinutes: 20
