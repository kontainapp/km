#!/bin/bash
# invoke gcc with extra params for Kontain link
#
cmd=`basename ${BASH_SOURCE[0]}`
dir=`dirname ${BASH_SOURCE[0]}`
KM_TOP=`realpath $dir/..`
if [[ $cmd == *g++ ]] ; then REALGCC=g++ ; else REALGCC=gcc; fi
if [ $# -eq 0 ] ; then exec "${REALGCC}" ; fi

exec "${REALGCC}" \
   -static -no-pie -specs=${KM_TOP}/gcc-km.spec \
    "$@" \
   -L ${KM_TOP}/build/runtime
